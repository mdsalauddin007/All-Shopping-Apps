<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" />
    <title>ShopOne AI ‚Äî Pro OS</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --bg: #020408;
            --surface: #0f121d;
            --accent: #10b981;
            --accent-glow: rgba(16, 185, 129, 0.3);
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --border: rgba(255, 255, 255, 0.08);
            --glass: rgba(15, 23, 42, 0.8);
        }

        /* --- SKELETON LOADING --- */
        @keyframes shimmer { 0% { background-position: -1000px 0; } 100% { background-position: 1000px 0; } }
        .skeleton {
            background: linear-gradient(to right, #1e293b 8%, #334155 18%, #1e293b 33%);
            background-size: 1000px 100%;
            animation: shimmer 2s infinite linear;
            border-radius: 8px;
        }

        /* --- GENERAL --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text-main); overflow-x: hidden; background-image: radial-gradient(circle at 50% -20%, #1e293b 0%, transparent 50%); }
        .container { max-width: 1200px; margin: auto; padding: 0 16px; }

        /* --- HEADER --- */
        .top-nav { position: sticky; top: 0; z-index: 2000; background: rgba(2, 4, 8, 0.85); backdrop-filter: blur(20px); border-bottom: 1px solid var(--border); padding: 10px 0; }
        .search-bar { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 10px 16px; display: flex; align-items: center; gap: 10px; transition: 0.3s; }
        .search-bar:focus-within { border-color: var(--accent); }
        .search-bar input { background: transparent; border: 0; color: #fff; width: 100%; outline: none; font-size: 14px; font-weight: 500; }

        /* --- BANNER --- */
        .os-banner { margin-top: 15px; width: 100%; height: clamp(100px, 15vw, 160px); border-radius: 24px; position: relative; overflow: hidden; border: 1px solid var(--border); background: linear-gradient(-45deg, #0f172a, #020617, #1e1b4b, #020408); background-size: 400% 400%; animation: mesh-flow 15s infinite ease; display: flex; align-items: center; justify-content: space-between; padding: 0 30px; box-shadow: 0 15px 40px rgba(0,0,0,0.3); transition: 0.3s; }
        .banner-info h1 { margin: 0; font-size: clamp(22px, 3vw, 32px); font-weight: 700; letter-spacing: -1px; line-height: 1.1; }
        .banner-info p { margin: 4px 0 0; font-size: 11px; color: var(--accent); font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }
        
        #bannerIcon { font-size: 50px; z-index: 10; transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); animation: float 4s infinite ease-in-out; }

        @keyframes mesh-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes float { 0% { transform: translateY(0); } 50% { transform: translateY(-6px); } 100% { transform: translateY(0); } }

        /* --- CATEGORIES --- */
        .cat-group { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin: 20px 0 25px; }
        .cat-pill { padding: 7px 14px; border-radius: 8px; background: var(--surface); border: 1px solid var(--border); font-size: 11px; font-weight: 600; color: var(--text-muted); cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 6px; }
        .cat-pill:hover { background: rgba(255,255,255,0.05); color: #fff; }
        .cat-pill.active { background: #fff; color: #000; border-color: #fff; }

        /* --- APP GRID --- */
        .app-shelf { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 16px; margin-bottom: 60px; }
        .app-card { background: var(--surface); border: 1px solid var(--border); border-radius: 24px; padding: 20px; display: flex; flex-direction: column; cursor: pointer; position: relative; transition: 0.3s; }
        .app-card:hover { transform: translateY(-6px); border-color: var(--accent); }
        
        .fav-icon { position: absolute; top: 15px; right: 15px; font-size: 18px; color: rgba(255,255,255,0.2); transition: 0.2s; z-index: 5; }
        .fav-icon.active { color: #ef4444; transform: scale(1.2); }
        
        .squircle-icon-wrap { width: 60px; height: 60px; margin-bottom: 16px; }
        .squircle-icon { width: 100%; height: 100%; background: #fff; border-radius: 16px; display: flex; align-items: center; justify-content: center; padding: 10px; position: relative; overflow: hidden; }
        .squircle-icon img { max-width: 90%; max-height: 90%; object-fit: contain; z-index: 1; }
        
        .app-card h3 { margin: 0; font-size: 16px; font-weight: 700; letter-spacing: -0.3px; }
        .app-card p { font-size: 12px; color: var(--text-muted); margin: 6px 0 18px; line-height: 1.4; flex-grow: 1; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        .btn-stack { display: flex; gap: 6px; }
        .btn { flex: 1; padding: 10px 4px; border-radius: 10px; border: 0; font-weight: 700; font-size: 10px; cursor: pointer; text-transform: uppercase; white-space: nowrap; }
        .btn-p { background: var(--accent); color: #000; }
        .btn-s { background: rgba(255,255,255,0.05); color: #fff; border: 1px solid var(--border); }

        /* --- MODAL --- */
        .modal { position: fixed; inset: 0; background: rgba(2, 4, 8, 0.98); z-index: 5000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .modal-box { width: 90%; max-width: 360px; text-align: center; }
        .ai-core { width: 80px; height: 80px; background: var(--accent); border-radius: 50%; margin: 0 auto 25px; display: flex; align-items: center; justify-content: center; font-size: 40px; animation: pulse 2s infinite; }
        .bar-bg { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; margin: 15px 0; overflow: hidden; }
        .bar-fill { width: 0%; height: 100%; background: var(--accent); transition: width 0.3s; }
        .coupon-box { background: #fff; color: #000; padding: 15px; border-radius: 12px; font-weight: 800; letter-spacing: 2px; margin: 20px 0; font-size: 20px; border: 2px dashed #000; display: none; }

        @media (max-width: 768px) {
            .app-shelf { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            .app-card { padding: 15px; border-radius: 20px; }
            .squircle-icon-wrap { width: 50px; height: 50px; margin-bottom: 12px; }
            .btn-stack { flex-direction: column; gap: 6px; }
            .cat-group { justify-content: flex-start; overflow-x: auto; flex-wrap: nowrap; padding-bottom: 5px; }
            .cat-pill { white-space: nowrap; }
            .os-banner { height: 120px; padding: 0 20px; }
        }
    </style>
</head>
<body>

    <div class="top-nav">
        <div class="container">
            <div class="search-bar">
                <span style="font-size: 16px; opacity: 0.5;">üîç</span>
                <input id="searchInput" placeholder="Search apps..." autocomplete="off">
            </div>
        </div>
    </div>

    <div class="container">
        <div class="os-banner">
            <div class="banner-info">
                <p id="bannerTag">AI Shopping OS</p>
                <h1 id="bannerTitle">ShopOne AI</h1>
            </div>
            <div id="bannerIcon">ü§ñ</div>
        </div>

        <nav id="catBar" class="cat-group"></nav>

        <main id="appShelf" class="app-shelf">
            <div class="app-card" style="height: 220px; pointer-events: none;">
                <div class="skeleton" style="width: 50px; height: 50px; border-radius: 16px; margin-bottom: 15px;"></div>
                <div class="skeleton" style="width: 70%; height: 20px; margin-bottom: 10px;"></div>
                <div class="skeleton" style="width: 100%; height: 35px; border-radius: 10px; margin-top: auto;"></div>
            </div>
             <div class="app-card" style="height: 220px; pointer-events: none;">
                <div class="skeleton" style="width: 50px; height: 50px; border-radius: 16px; margin-bottom: 15px;"></div>
                <div class="skeleton" style="width: 70%; height: 20px; margin-bottom: 10px;"></div>
                <div class="skeleton" style="width: 100%; height: 35px; border-radius: 10px; margin-top: auto;"></div>
            </div>
        </main>
    </div>

    <div id="aiModal" class="modal">
        <div class="modal-box">
            <div class="ai-core">üß†</div>
            <h2 id="modalBrand" style="font-size: 20px; margin-top:0;">AI Activation</h2>
            <div class="bar-bg"><div id="modalBar" class="bar-fill"></div></div>
            <p id="modalStatus" style="color:var(--text-muted); font-size:12px;">Secure connection...</p>
            <div id="coupon" class="coupon-box">VIP2026</div>
            <button id="modalBtn" onclick="finalLaunch()" style="display:none; width:100%; padding:15px; background:var(--accent); color:#000; border:0; border-radius:12px; font-weight:800; cursor:pointer; font-size:14px;">ACTIVATE ‚Üí</button>
        </div>
    </div>

    <script>
        const API_URL = "https://opensheet.elk.sh/1BXjElCofEZncI0G9iPEhJ6s5MqkqERCfWXHoYR_cg-Q/All-SHOPPING-APPS";
        let storeData = [];
        let favorites = JSON.parse(localStorage.getItem('shopOneFavs')) || [];
        let targetUrl = "";

        // EXACT ICON MAPPING (PER YOUR LIST)
        const catConfigs = {
            // General
            "all": { icon: "ü§ñ", tag: "Universal AI", title: "ShopOne AI" },
            "favorites": { icon: "‚ù§Ô∏è", tag: "My Saved Apps", title: "My Favorites" },

            // Shopping & Auction
            "shopping": { icon: "üõçÔ∏è", tag: "Retail Therapy", title: "Shopping" },
            "deals": { icon: "üî•", tag: "Hot Offers", title: "Super Deals" },
            "auction": { icon: "üî®", tag: "Bidding Live", title: "Auctions" }, // Fixed as Gavel

            // Fashion & Lifestyle
            "beauty": { icon: "üíÑ", tag: "Glow Up", title: "Beauty" },
            "fashion": { icon: "üëó", tag: "Trend Setter", title: "Fashion" },
            "clothing": { icon: "üëï", tag: "Wardrobe", title: "Clothing" },
            "footwear": { icon: "üëü", tag: "Step Up", title: "Footwear" },
            "sportswear": { icon: "üéΩ", tag: "Be Active", title: "Sportswear" },
            "grooming": { icon: "üßî", tag: "Self Care", title: "Grooming" },

            // Food & Grocery
            "grocery": { icon: "ü•ë", tag: "Fresh Daily", title: "Grocery" },
            "food": { icon: "üçî", tag: "Hungry?", title: "Food & Dining" },
            "health": { icon: "üè•", tag: "Stay Healthy", title: "Health" },
            "wellness": { icon: "üßò", tag: "Mind & Body", title: "Wellness" },

            // Education
            "books": { icon: "üìö", tag: "Read More", title: "Books" },
            "education": { icon: "üéì", tag: "Knowledge", title: "Education" },

            // Technology
            "electronics": { icon: "üíª", tag: "Tech Zone", title: "Electronics" },
            "software": { icon: "üíæ", tag: "Digital Tools", title: "Software" },
            "hosting": { icon: "‚òÅÔ∏è", tag: "Cloud Server", title: "Web Hosting" },
            "domains": { icon: "üåê", tag: "Web Identity", title: "Domains" },
            "internet": { icon: "üì°", tag: "Connectivity", title: "Internet" },
            "digitalassets": { icon: "ü™ô", tag: "Crypto & NFT", title: "Digital Assets" },

            // Finance & Work
            "finance": { icon: "üí∞", tag: "Wealth", title: "Finance" },
            "freelancing": { icon: "üßë‚Äçüíº", tag: "Work Remote", title: "Freelancing" },

            // Home & Family
            "home": { icon: "üè†", tag: "Sweet Home", title: "Home" },
            "babycare": { icon: "üë∂", tag: "Little Ones", title: "Baby Care" },
            "pets": { icon: "üêæ", tag: "Furry Friends", title: "Pets" },

            // Travel
            "travel": { icon: "‚úàÔ∏è", tag: "Explore", title: "Travel" },
            "airlines": { icon: "üõ´", tag: "Fly High", title: "Airlines" },

            // Fallback
            "default": { icon: "üü¶", tag: "Explore", title: "More Apps" }
        };

        async function init() {
            setTimeout(async () => {
                try {
                    const res = await fetch(API_URL);
                    storeData = await res.json();
                    renderFilters();
                    renderShelf("All");
                } catch (e) { console.error(e); }
            }, 1000);
        }

        // SMART ICON MATCHER
        function getCatConfig(catName) {
            const cleanName = catName.toLowerCase().replace(/\s+/g, '').trim();
            const lower = catName.toLowerCase();

            // 1. Direct Match (Best)
            if (catConfigs[cleanName]) return catConfigs[cleanName];

            // 2. Keyword Match (Smart)
            if (lower.includes('hosting')) return catConfigs['hosting'];
            if (lower.includes('domain')) return catConfigs['domains'];
            if (lower.includes('auction') || lower.includes('bid')) return catConfigs['auction'];
            if (lower.includes('gym') || lower.includes('fitness')) return catConfigs['sportswear'];
            if (lower.includes('shoe') || lower.includes('sneaker')) return catConfigs['footwear'];
            if (lower.includes('baby') || lower.includes('kid')) return catConfigs['babycare'];
            if (lower.includes('flight') || lower.includes('plane')) return catConfigs['airlines'];
            if (lower.includes('wifi') || lower.includes('broadband')) return catConfigs['internet'];
            if (lower.includes('crypto')) return catConfigs['digitalassets'];
            if (lower.includes('job') || lower.includes('work')) return catConfigs['freelancing'];

            // 3. Fallback
            return catConfigs['default'];
        }

        function renderFilters() {
            const bar = document.getElementById("catBar");
            const cats = ["All", "Favorites", ...new Set(storeData.map(b => b.category))];
            
            bar.innerHTML = cats.map(c => {
                const config = getCatConfig(c);
                return `<div class="cat-pill ${c==='All'?'active':''}" onclick="setCategory(this, '${c}')">
                    <i>${config.icon}</i> ${c}
                </div>`;
            }).join('');
        }

        function setCategory(btn, cat) {
            document.querySelectorAll('.cat-pill').forEach(p => p.classList.remove('active'));
            btn.classList.add('active');
            
            const config = getCatConfig(cat);
            
            // Update Banner Text
            document.getElementById("bannerTitle").innerText = config.title || cat;
            document.getElementById("bannerTag").innerText = config.tag || "Browsing";
            
            // Update Banner Icon with Animation
            const iconEl = document.getElementById("bannerIcon");
            iconEl.style.transform = "scale(0) rotate(-45deg)";
            iconEl.style.opacity = "0";
            
            setTimeout(() => {
                iconEl.innerText = config.icon;
                iconEl.style.transform = "scale(1) rotate(0deg)";
                iconEl.style.opacity = "1";
            }, 200);
            
            renderShelf(cat);
        }

        function toggleFav(e, name) {
            e.stopPropagation();
            if(favorites.includes(name)) {
                favorites = favorites.filter(f => f !== name);
            } else {
                favorites.push(name);
            }
            localStorage.setItem('shopOneFavs', JSON.stringify(favorites));
            
            const activeCat = document.querySelector('.cat-pill.active').innerText.trim();
            if(document.querySelector('.cat-pill.active').innerText.includes("Favorites")) {
                 renderShelf("Favorites");
            } else {
                e.target.classList.toggle('active');
            }
        }

        function renderShelf(cat, q = "") {
            const shelf = document.getElementById("appShelf");
            let filtered = [];

            if (cat === "Favorites") {
                filtered = storeData.filter(b => favorites.includes(b.name));
                if(filtered.length === 0) {
                    shelf.innerHTML = `<div style="grid-column: 1/-1; text-align:center; padding:40px; color:var(--text-muted);">
                        <div style="font-size:40px; margin-bottom:10px;">üíî</div>
                        No favorites yet.
                    </div>`;
                    return;
                }
            } else {
                filtered = storeData.filter(b => (cat === "All" || b.category === cat) && b.name.toLowerCase().includes(q.toLowerCase()));
            }
            
            shelf.innerHTML = filtered.map(b => {
                const isFav = favorites.includes(b.name);
                return `
                <div class="app-card" onclick="triggerActivation('${b.link}', '${b.name}')">
                    <div class="fav-icon ${isFav ? 'active' : ''}" onclick="toggleFav(event, '${b.name}')">‚ù§</div>
                    <div class="squircle-icon-wrap">
                        <div class="squircle-icon">
                            <img src="${b.logo_override}" onerror="this.src='https://ui-avatars.com/api/?name=${b.name}'">
                        </div>
                    </div>
                    <h3>${b.name}</h3>
                    <p>${b.desc || 'Verified Store Connection'}</p>
                    <div class="btn-stack">
                        <button class="btn btn-p">Activate Deal</button>
                        <button class="btn btn-s">Launch</button>
                    </div>
                </div>
            `}).join('');
        }

        function triggerActivation(link, name) {
            targetUrl = link;
            const modal = document.getElementById("aiModal");
            const bar = document.getElementById("modalBar");
            const status = document.getElementById("modalStatus");
            const cp = document.getElementById("coupon");
            const btn = document.getElementById("modalBtn");
            modal.style.display = "flex";
            bar.style.width = "0%";
            cp.style.display = "none";
            btn.style.display = "none";
            document.getElementById("modalBrand").innerText = name;
            let p = 0;
            const timer = setInterval(() => {
                p += 5;
                bar.style.width = p + "%";
                if(p > 70) status.innerText = "Generating ID...";
                if(p >= 100) {
                    clearInterval(timer);
                    status.innerText = "Ready!";
                    cp.style.display = "block";
                    cp.innerText = "SAVE" + Math.floor(Math.random()*20 + 10);
                    btn.style.display = "block";
                    confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                }
            }, 30);
        }

        function finalLaunch() {
            const code = document.getElementById("coupon").innerText;
            navigator.clipboard.writeText(code);
            document.getElementById("aiModal").style.display = "none";
            window.open(targetUrl, "_blank");
        }

        document.getElementById("searchInput").oninput = (e) => renderShelf("All", e.target.value);
        window.onload = init;
    </script>
</body>
</html>
